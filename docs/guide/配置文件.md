---
outline: [2, 3]
---

# é…ç½®æŒ‡å—

Embykeeper éœ€è¦è¾“å…¥ä¸€ä¸ª `toml` æ ¼å¼çš„é…ç½®æ–‡ä»¶, é»˜è®¤ä¸º `config.toml`.

å½“é¦–æ¬¡è¿è¡Œæ—¶, ä¸€ä¸ªæ¨¡æ¿ `config.toml` æ–‡ä»¶å°†è¢«ç”Ÿæˆ, å¯ä»¥è½»æ¾ç¼–è¾‘ (æ‚¨ä¹Ÿå¯ä»¥ä»[è¿™é‡Œ](https://github.com/emby-keeper/emby-keeper/blob/main/config.example.toml)ä¸‹è½½).

<!--@include: ./_ç®€è¦é…ç½®.md-->

æ›´å¤šé…ç½®é¡¹è¯¦è§æ¨¡æ¿æ–‡ä»¶æ³¨é‡ŠåŠä¸‹æ–‡è¯¦ç»†è¯´æ˜.

## é…ç½®é¡¹ç›®

### é¡¶çº§é¡¹ç›®

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `mongodb` | `str` | MongoDB è¿æ¥å­—ç¬¦ä¸² | (ä¸ä½¿ç”¨) |
| `basedir` | `str` | åŸºç¡€ç›®å½•è·¯å¾„ | (ä½¿ç”¨ç”¨æˆ·ç›®å½•) |
| `proxy` | `dict` | ä»£ç†è®¾ç½®å­é¡¹ | |
| `emby` | `dict` | Emby ç›¸å…³é…ç½®å­é¡¹ | |
| `subsonic` | `dict` | Subsonic ç›¸å…³é…ç½®å­é¡¹ | |
| `checkiner` | `dict` | Telegram æœºå™¨äººç­¾åˆ°ç›¸å…³é…ç½®å­é¡¹ | |
| `monitor` | `dict` | Telegram ç¾¤ç»„ç›‘æ§ç›¸å…³é…ç½®å­é¡¹ | |
| `messager` | `dict` | Telegram è‡ªåŠ¨æ°´ç¾¤ç›¸å…³é…ç½®å­é¡¹ | |
| `telegram` | `dict` | Telegram è´¦å·å­é¡¹ | |
| `notifier` | `dict`/`bool`/`str`/`int` | é€šçŸ¥è®¾ç½®å­é¡¹ | |
| `site` | `dict` | ç«™ç‚¹æœåŠ¡é…ç½®å­é¡¹ | |

::: info æ—§ç‰ˆæœ¬
ä¸€äº›æ—§ç‰ˆæœ¬é…ç½®é¡¹ä»ç„¶æ”¯æŒï¼Œä½†å»ºè®®ä½¿ç”¨æ–°çš„é…ç½®æ–¹å¼ï¼š

- `time` -> `checkiner.time_range`
- `timeout` -> `checkiner.timeout`
- `retries` -> `checkiner.retries`
- `concurrent` -> `checkiner.concurrency`
- `random` -> `checkiner.random_start`
- `watch_concurrent` -> `emby.concurrency`
- `listen_concurrent` -> `subsonic.concurrency`
- `watchtime` -> `emby.time_range`
- `listentime` -> `subsonic.time_range`
- `interval` -> `emby.interval_days`/`subsonic.interval_days`
- `notify_immediately` -> `notifier.immediately`
- `service` -> `site`
  :::

::: tip æç¤º
ä¸ä½¿ç”¨ MongoDB æ—¶, é»˜è®¤ä½¿ç”¨ JSON å­˜å‚¨ç¼“å­˜.

MongoDB å­—ç¬¦ä¸²ä¾‹å¦‚:

```toml
mongodb = "mongodb://username:password@localhost:27017/dbname"
```

:::

### `proxy` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®ç”¨äºè¿æ¥ Telegram å’Œ Emby æœåŠ¡å™¨çš„ä»£ç†. é»˜è®¤ä¸ä½¿ç”¨ä»£ç†.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ----- |
| `hostname` | `str` | ä»£ç†æœåŠ¡å™¨åœ°å€ | |
| `port` | `int` | ä»£ç†ç«¯å£å· | |
| `scheme` | `str` | ä»£ç†åè®®, å¯ä»¥ä¸º "`socks5`" æˆ– "`http`" | |
| `username` | `str` | ä»£ç†æœåŠ¡å™¨è®¤è¯ç”¨æˆ·å, ä¸å¡«ä¸ä½¿ç”¨è®¤è¯ | |
| `password` | `str` | ä»£ç†æœåŠ¡å™¨è®¤è¯å¯†ç , ä¸å¡«ä¸ä½¿ç”¨è®¤è¯ | |

ä¾‹å¦‚:

```toml
[proxy]
hostname = "127.0.0.1"
port = 1080
scheme = "socks5"
```

### `telegram.account` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª Telegram è´¦æˆ·.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `phone` | `str` | å¸¦å›½å®¶åŒºå·çš„è´¦æˆ·æ‰‹æœºå·, ä¸€èˆ¬ä¸º "`+86...`" | |
| `checkiner` | `bool` | å¯ç”¨æœºå™¨äººç­¾åˆ°ç³»åˆ—åŠŸèƒ½ | `true` |
| `monitor` | `bool` | å¯ç”¨ç¾¤ç»„ç›‘æ§ç³»åˆ—åŠŸèƒ½ | `false` |
| `messager` | `bool` | å¯ç”¨è‡ªåŠ¨æ°´ç¾¤ç³»åˆ—åŠŸèƒ½ | `false` |
| `site` | `dict` | è´¦å·å•ç‹¬çš„ [`site` é…ç½®](#site-å­é¡¹), é»˜è®¤ä½¿ç”¨å…¨å±€ | |
| `checkiner_config` | `dict` | è´¦å·å•ç‹¬çš„ [`checkiner` é…ç½®](#checkiner-å­é¡¹), é»˜è®¤ä½¿ç”¨å…¨å±€ | |
| `api_id` | `str` | ä»[Telegram å®˜ç½‘](https://my.telegram.org/)ç”³è¯·çš„ Application ID | |
| `api_hash` | `str` | ä»[Telegram å®˜ç½‘](https://my.telegram.org/)ç”³è¯·çš„ Application Hash | |
| `enabled` | `bool` | æ˜¯å¦å¯ç”¨è¯¥è´¦å· | `true` |

å…¶ä¸­, `monitor` å’Œ `messager` æ˜¯å„è´¦æˆ·çš„ç¾¤ç»„ç›‘æ§å’Œè‡ªåŠ¨æ°´ç¾¤å¼€å…³, ä¸[å‘½ä»¤è¡Œå‚æ•°](/guide/å‘½ä»¤è¡Œå‚æ•°#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E)ä¸­çš„å…¨å±€å¼€å…³æœ‰å·®å¼‚.

`api_id` å’Œ `api_hash` ä¸æ˜¯å¿…å¡«é¡¹, ä»…å½“ç¨‹åºå‡ºé”™å¹¶æç¤ºæ‚¨éœ€è¦è¯¥å‚æ•°æ—¶, æ‰éœ€è¦å¡«å…¥è¯¥å‚æ•°ã€‚

`site` çš„é…ç½®è¯·è¯¦è§ [`service` å­é¡¹](#ä¸åŒ-telegram-è´¦å·ä½¿ç”¨ä¸åŒçš„-site-æœåŠ¡é…ç½®).

ä¾‹å¦‚:

```toml
[[telegram.account]]
phone = "+8616401875896"
messager = false # ç¦ç”¨è¯¥è´¦å·çš„è‡ªåŠ¨æ°´ç¾¤åŠŸèƒ½ (éœ€è¦é«˜çº§è´¦å·, è°¨æ…ä½¿ç”¨)
monitor = false # ç¦ç”¨è¯¥è´¦å·çš„è‡ªåŠ¨ç›‘æ§åŠŸèƒ½ (éœ€è¦é«˜çº§è´¦å·)

[[telegram.account]]
phone = "+8613901234567"
messager = true # å¯ç”¨è¯¥è´¦å·çš„è‡ªåŠ¨æ°´ç¾¤åŠŸèƒ½
monitor = true # å¯ç”¨è¯¥è´¦å·çš„è‡ªåŠ¨ç›‘æ§åŠŸèƒ½
```

::: tip æ³¨æ„
`telegram.account` ç»„æ ‡é¢˜ç”±ä¸¤ä¸ªä¸­æ‹¬å·å›´èµ·.
:::

### `checkiner` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½® Telegram æœºå™¨äººç­¾åˆ°ç›¸å…³å‚æ•°.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `time_range` | `str` | Telegram æœºå™¨äººç­¾åˆ°æ—¶é—´æˆ–æ—¶é—´èŒƒå›´ , ä¾‹å¦‚:<br> `"14:00"` /<br> `"2:00PM"` /<br> `"<11:00AM,2:00PM>"` /<br> `"<11:00,14:00>"` | `"<11:00AM,11:00PM>"` |
| `timeout` | `int` | Telegram æœºå™¨äººç­¾åˆ°è¶…æ—¶ (ç§’) | `120` |
| `retries` | `int` | Telegram æœºå™¨äººç­¾åˆ°é”™è¯¯é‡è¯•æ¬¡æ•° | `4` |
| `concurrency` | `int` | Telegram æœºå™¨äººç­¾åˆ°æœ€å¤§å¹¶å‘ | `1` |
| `random_start` | `int` | Telegram æœºå™¨äººç­¾åˆ°å„ç«™ç‚¹é—´æ—¶é—´éšæœºé‡ (åˆ†é’Ÿ) | `60` |

ä¾‹å¦‚ï¼š

```toml
[checkiner]
time_range = "<11:00AM,2:00PM>"
timeout = 120
retries = 4
concurrency = 1
random_start = 60
```

### `emby` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½® Emby æˆ– Jellyfin æ¨¡æ‹Ÿè§‚çœ‹è‡ªåŠ¨ä¿æ´»ç›¸å…³å‚æ•°.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `time_range` | `str` | Emby ä¿æ´»å¼€å§‹å½“æ—¥æ—¶é—´æˆ–æ—¶é—´èŒƒå›´, ä¾‹å¦‚:<br> `"14:00"` /<br> `"2:00PM"` /<br> `"<11:00AM,2:00PM>"` /<br> `"<11:00,14:00>"` | `"<11:00AM,11:00PM>"` |
| `interval_days` | `int`/`str` | Emby ä¿æ´»é—´éš”å¤©æ•°, æˆ–é—´éš”å¤©æ•°èŒƒå›´, ä¾‹å¦‚:<br> `5` /<br> `"10"` /<br> `"<7,12>"` | `"<7,12>"` |
| `concurrency` | `int` | Emby ä¿æ´»æœ€å¤§å¹¶å‘ | `1` |
| `retries` | `int` | Emby ä¿æ´»é”™è¯¯é‡è¯•æ¬¡æ•° | `4` |

### `emby.account` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª Emby æˆ– Jellyfin æœåŠ¡å™¨è´¦æˆ·.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `url` | `str` | Emby æœåŠ¡å™¨åœ°å€<br>ä¸€èˆ¬ä¸º "`https://...:443`" æˆ– "`https://...:8096`" | |
| `username` | `str` | Emby æœåŠ¡å™¨ç”¨æˆ·å | |
| `password` | `str` | Emby æœåŠ¡å™¨å¯†ç  | |
| `name` | `str` | æ˜¾ç¤ºå, ä»¥åœ¨æ—¥å¿—ä¸­ä½¿ç”¨ | |
| `time` | `list` / `int` | æ¨¡æ‹Ÿè§‚çœ‹çš„éšæœºæ—¶é—´èŒƒå›´, è®¾ä¸ºå°äº0 (`time = -1`) ä»¥ä»…ç™»é™†ä¸è§‚çœ‹ (ç§’) | `[300, 600]` |
| `continuous` | `bool` | æ˜¯å¦æ‰§è¡Œé•¿è¿è¡Œæ¨¡å¼ | `false` |
| `allow_multiple` | `bool` | `true`: å…è®¸æ’­æ”¾å¤šä¸ªè§†é¢‘ç›´åˆ°è¾¾åˆ°æ—¶é—´è¦æ±‚ <br> `false`: å¯»æ‰¾å•ä¸ªæ—¶é—´è¾¾æ ‡è§†é¢‘è¿›è¡Œæ’­æ”¾ | `true` |
| `allow_stream` | `bool` | `true`: å…è®¸æ¨¡æ‹Ÿæ’­æ”¾æ²¡æœ‰æ—¶é•¿ä¿¡æ¯çš„è§†é¢‘ <br> `false`: é‡é€‰æ²¡æœ‰æ—¶é•¿ä¿¡æ¯çš„è§†é¢‘ | `false` |
| `device` | `str` | è‡ªå®šä¹‰çš„è®¾å¤‡åç§° (é»˜è®¤æ¨¡æ‹Ÿ iPhone) | |
| `client` | `str` | è‡ªå®šä¹‰çš„å®¢æˆ·ç«¯å (é»˜è®¤æ¨¡æ‹Ÿ Fileball/Filebar) | |
| `client_version` | `str` | è‡ªå®šä¹‰çš„å®¢æˆ·ç«¯ç‰ˆæœ¬ (é»˜è®¤æ¨¡æ‹Ÿ Fileball/Filebar) | |
| `useragent` | `str` | è‡ªå®šä¹‰çš„ç”¨æˆ·ä»£ç† (é»˜è®¤æ¨¡æ‹Ÿ Fileball/Filebar) | |
| `device_id` | `str` | è‡ªå®šä¹‰çš„è®¾å¤‡ ID (é»˜è®¤ä¸ºæœºå™¨ç ) | |
| `cf_challenge` | `bool` | å…è®¸å°è¯•ä½¿ç”¨åœ¨çº¿æœåŠ¡è§£æ Cloudflare éªŒè¯ç  | `true` |
| `use_proxy` | `bool` | æ˜¯å¦ä½¿ç”¨å®šä¹‰çš„ä»£ç† (è‹¥å­˜åœ¨ `proxy`) | `true` |
| `play_id` | `str` | ä»…æ’­æ”¾ç‰¹å®š ID çš„è§†é¢‘ | `true` |
| `interval_days` | `int`/`str` | è´¦å·ç‰¹å®šçš„ä¿æ´»é—´éš”å¤©æ•°, æˆ–é—´éš”å¤©æ•°èŒƒå›´ | (ä½¿ç”¨å…¨å±€é…ç½®) |
| `time_range` | `str` | è´¦å·ç‰¹å®šçš„ä¿æ´»å¼€å§‹å½“æ—¥æ—¶é—´æˆ–æ—¶é—´èŒƒå›´ | (ä½¿ç”¨å…¨å±€é…ç½®) |
| `enabled` | `bool` | æ˜¯å¦å¯ç”¨è¯¥è´¦å· | `true` |

ä¾‹å¦‚ï¼š

```toml
[emby]
time_range = "<11:00AM,2:00PM>"
interval_days = "<7,12>"
concurrency = 3

[[emby.account]]
url = "https://emby.example.com"
username = "user"
password = "pass"
time = [300, 600]
```

::: tip æ³¨æ„
`emby` ç»„æ ‡é¢˜ç”±ä¸€ä¸ªä¸­æ‹¬å·å›´èµ·.

`emby.account` ç»„æ ‡é¢˜ç”±ä¸¤ä¸ªä¸­æ‹¬å·å›´èµ·.
:::

::: warning æ³¨æ„
è¯·äº†è§£åŸç†å†æ›´æ”¹ `device` / `client` / `client_version` / `useragent` / `device_id`.

è¿™äº›è®¾ç½®çš„é»˜è®¤å€¼å‡æ˜¯é€šè¿‡æŠ“åŒ…å¸¸ç”¨çš„æ’­æ”¾è½¯ä»¶è·å¾—çš„, ä»…æ›´æ”¹å…¶ä¸­ä¸€äº›, å®¹æ˜“è¢«è¯†åˆ«.
åŒæ—¶, é»˜è®¤è®¾ç½®çš„è¯·æ±‚æ–¹å¼æ˜¯é’ˆå¯¹äº Fileball/Filebar è°ƒåˆ¶çš„, æ›´æ”¹æ¨¡æ‹Ÿçš„å®¢æˆ·ç«¯å¯èƒ½ä¼šè¢«è¯†åˆ«.
:::

::: info æ³¨æ„
è®¾ç½® `play_id` å, åªä¼šæ’­æ”¾è¯¥è§†é¢‘ (å¦‚æœè§†é¢‘é•¿åº¦ä½äºæ‰€éœ€è¦æ±‚ä¼šåå¤æ’­æ”¾).

`play_id` å¯ä»¥é€šè¿‡è§†é¢‘é¡µé¢çš„ URL è·å¾—:

https://example.com/web/#/details?id=123abcdefg123&serverId=456hijklmn456

åˆ™ `play_id` åº”è¯¥è¢«è®¾ç½®ä¸º `123abcdefg123`.
:::

### `site` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®ç­¾åˆ°/æ°´ç¾¤/ç›‘è§†åŠŸèƒ½å¯ç”¨çš„ç«™ç‚¹.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `checkiner` | `list` | å¯ç”¨çš„ç­¾åˆ°ç«™ç‚¹ | (å½“å‰é»˜è®¤å¯ç”¨çš„ç«™ç‚¹) |
| `monitor` | `list` | å¯ç”¨çš„ç›‘è§†ç«™ç‚¹ | (å½“å‰é»˜è®¤å¯ç”¨çš„ç«™ç‚¹) |
| `messager` | `list` | å¯ç”¨çš„æ°´ç¾¤ç«™ç‚¹ | (å½“å‰é»˜è®¤å¯ç”¨çš„ç«™ç‚¹) |

ä¾‹å¦‚:

```toml
[site]
checkiner = ["charon", "embyhub", "jms", "ljyy", "magic", "peach", "pornemby", "sssq", "terminus"]
monitor = ["bgk", "embyhub", "pornemby_answer", "pornemby_double", "pornemby_dragon_rain", "pornemby_nohp", "viper"]
messager = ["pornemby"]
```

::: tip æç¤º
å¯ä»¥ä»…æŒ‡å®š `checkiner`, `monitor`, `messager` ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ª, å…¶ä»–æœªè®¾å®šçš„å°†ä¿æŒé»˜è®¤:

```toml
[site]
checkiner = ["charon", "embyhub", "jms", "ljyy", "magic", "peach", "pornemby", "sssq", "terminus"]
# (å…¶ä»–çš„å°†ä¿æŒé»˜è®¤)
```

:::

å½“å‰æ”¯æŒçš„ç«™ç‚¹è¯·è§ [**ğŸ¬ æ”¯æŒçš„ç«™ç‚¹**](/guide/æ”¯æŒçš„ç«™ç‚¹).

#### ç«™ç‚¹å°šæœªè¢«æ”¯æŒæ—¶ä½¿ç”¨æ¨¡æ¿åˆ›å»º

å¦‚æœæ‚¨éœ€è¦**ç­¾åˆ°**ç«™ç‚¹å°šæœªè¢«æ”¯æŒ, ä½†æ˜¯ç¬¦åˆä»¥ä¸‹é€šç”¨æ¨¡æ¿æ ¼å¼, å³å¯é€šè¿‡æ¨¡æ¿åˆ›å»º:

:::details ä½¿ç”¨ [Sakura_embyboss](https://github.com/berry8838/) éƒ¨ç½²çš„æœºå™¨äºº (**`templ_a`**)

æ”¯æŒç±»ä¼¼äºè¯¥å›¾æ¨¡å¼çš„æœºå™¨äºº:

![templ_a](/templ_a_example.png)

å¯ä»¥ä½¿ç”¨ `templ_a<xxx>` æ ¼å¼å¯ç”¨, `xxx` ä¸ºæœºå™¨äººçš„ç”¨æˆ·å, å¦‚:

```toml
[site]
checkiner = ["templ_a<moumou_bot>"]
```

:::

:::details å‘é€ "/checkin" å¯ä»¥å®Œæˆç­¾åˆ°çš„æœºå™¨äºº, æ”¯æŒè¯†åˆ«è¾“å…¥å¼éªŒè¯ç  (**`templ_b`**)

ä»…å‘é€ /checkin, å¯é€‰åœ°, è¯†åˆ«è¾“å…¥å¼éªŒè¯ç å¹¶å›å¤, å¹¶æ£€æµ‹ç­¾åˆ°æˆåŠŸç­‰æ–‡å­—.

å¯ä»¥ä½¿ç”¨ `templ_b<xxx>` æ ¼å¼å¯ç”¨, `xxx` ä¸ºæœºå™¨äººçš„ç”¨æˆ·å.

:::

:::details ä½¿ç”¨ [Sakura_embyboss](https://github.com/berry8838/) éƒ¨ç½²çš„æœºå™¨äººå®šæ—¶å°è¯•æ³¨å†Œ (**`templ_c`**)

å¯ä»¥ä½¿ç”¨ `templ_c<xxx>` æ ¼å¼å¯ç”¨, `xxx` ä¸ºæœºå™¨äººçš„ç”¨æˆ·å.

```toml
[site]
checkiner = ["templ_c<moumou_bot>"]

[checkiner.'templ_c<moumou_bot>']
interval = 6000
```

è¿™å°†åœ¨æŸæŸç«™ç‚¹ (æœºå™¨äººç”¨æˆ·åä¸º `@moumou_bot`) æ¯ 6000 ç§’å°è¯•ä½¿ç”¨ `/start` è·å–ä¸€æ¬¡å¼€æ³¨æƒ…å†µ, å¦‚å¼€æ³¨åˆ™æ³¨å†Œ.

:::

å¦‚æœæ‚¨å¸Œæœ›**ç›‘æ§**çš„ç«™ç‚¹å°šæœªè¢«æ”¯æŒ, å¯é€šè¿‡æ¨¡æ¿åˆ›å»º:

:::details è‡ªå®šä¹‰ç›‘æ§, è¯†åˆ«åˆ°å¯¹åº”æ¶ˆæ¯åå‘ Telegram å‘é€é€šçŸ¥æˆ–è‡ªåŠ¨å‘é€ä¿¡æ¯ (**`templ_a`**)

æ‚¨éœ€è¦å…ˆå¢åŠ ä¸€ä¸ªç«™ç‚¹:

```toml
[site]
monitor = ["templ_a<example_site>"]

[monitor.'templ_a<example_site>']
name = "æŸæŸç«™ç‚¹"
chat_name = "moumou_chat"
chat_keyword = "å¼€æ³¨å•¦"
send_immediately = true
try_register_bot = "moumou_bot"
```

è¿™å°†åœ¨æŸæŸç«™ç‚¹ (ç”¨æˆ·åä¸º `@moumou_chat`) ä¸­æœ‰ä»»æ„ç”¨æˆ·å‘é€ "å¼€æ³¨å•¦" æ—¶ç«‹åˆ»å‘è®¾ç½®çš„ Telegram è´¦å·å‘é€æ¶ˆæ¯.

å¯ä½¿ç”¨çš„è®¾ç½®é¡¹åŒ…æ‹¬:

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `name` | `str` | ç›‘æ§å™¨æ˜¾ç¤ºåç§° | |
| `chat_name` | `str`/`int` | ç›‘æ§çš„ç¾¤èŠ (æ”¯æŒç”¨æˆ·å / ID) | |
| `chat_allow_outgoing` | `bool` | æ˜¯å¦æ”¯æŒè‡ªå·±å‘è¨€è§¦å‘ | `false` |
| `chat_user` | `str`/`list` | ä»…è¢«åˆ—è¡¨ä¸­ç”¨æˆ·çš„å‘è¨€è§¦å‘ (æ”¯æŒç”¨æˆ·å / ID) | `[]` |
| `chat_keyword` | `str`/`list` | ä»…å½“æ¶ˆæ¯å«æœ‰åˆ—è¡¨ä¸­çš„å…³é”®è¯æ—¶è§¦å‘, æ”¯æŒ Regex | `[]` |
| `chat_except_keyword` | `str`/`list` | æ¶ˆæ¯å«æœ‰åˆ—è¡¨ä¸­çš„å…³é”®è¯æ—¶ä¸è§¦å‘, æ”¯æŒ Regex | `[]` |
| `send` | `bool` | æ˜¯å¦æ¨é€æ¶ˆæ¯ | `true` |
| `send_immediately` | `bool` | æ˜¯å¦å‘é€å³æ—¶æ—¥å¿—, ä¸ç­‰å¾…æ¯æ—¥æ¨é€æ—¶é—´ | `true` |
| `try_register_bot` | `str` | å°è¯•åœ¨æœºå™¨äººå¤„æ³¨å†Œ (éœ€è¦ä¸º berry8838/Sakura_embyboss é¡¹ç›®éƒ¨ç½²çš„æœºå™¨äºº) | (ä¸æ³¨å†Œ) |
| `chat_reply` | `str` | è‡ªåŠ¨å›å¤ç›‘æ§åˆ°ä¿¡æ¯çš„å†…å®¹ | (ä¸å›å¤) |
| `chat_probability` | `float` | æ¯æ¬¡å›å¤çš„éšæœºæ¦‚ç‡ (0æœ€ä½, 1æœ€é«˜) | `1.0` |
| `chat_delay` | `int` | å›å¤å‘ä¿¡å»¶è¿Ÿ (ç§’) | `0` |
| `chat_follow_user` | `int` | éœ€è¦ç­‰å¾… N ä¸ªç”¨æˆ·å‘é€ `chat_reply` æ–¹å¯å›å¤ | `0` |
| `trigger_interval` | `float` | æ¯æ¬¡è§¦å‘çš„æœ€ä½æ—¶é—´é—´éš” (ç§’) | `2` |
| `trigger_sim` | `int` | åŒæ—¶è§¦å‘çš„æœ€å¤§å¹¶è¡Œå¤„ç†æ•° | `1` |
| `trigger_max_time` | `float` | è§¦å‘åå¤„ç†çš„æœ€é•¿æ—¶é—´ (ç§’) | `120` |
| `allow_edit` | `bool` | å¯¹äºç¼–è¾‘åæ¶ˆæ¯çš„å†…å®¹ä¹Ÿè§¦å‘ | `false` |
| `allow_caption` | `bool` | æ˜¯å¦å…è®¸å¸¦ç…§ç‰‡çš„æ¶ˆæ¯ | `true` |
| `allow_text` | `bool` | æ˜¯å¦å…è®¸ä¸å¸¦ç…§ç‰‡çš„æ¶ˆæ¯ | `true` |

:::

#### ç«™ç‚¹åˆé›†çš„ç¼©å†™

å¯ä»¥ä½¿ç”¨ `all` è¡¨ç¤ºå…¨éƒ¨, `sgk` è¡¨ç¤ºå…¨éƒ¨ç¤¾å·¥åº“ç­¾åˆ°å™¨:

```toml
[site]
checkiner = ["sgk"] // ä»…å¼€å¯ç¤¾å·¥åº“ç­¾åˆ°å™¨
```

```toml
[site]
checkiner = ["all"] // å¼€å¯å…¨éƒ¨æ”¯æŒçš„ç­¾åˆ°å™¨ (å®é™…ä»…ä¼šç­¾åˆ°æ›¾ç»å¯ç”¨è¿‡æœºå™¨äººçš„ç«™ç‚¹)
```

```toml
[site]
monitor = ["all"] // å¼€å¯å…¨éƒ¨æ”¯æŒçš„ç›‘æ§å™¨ (å®é™…ä»…ä¼šç­¾åˆ°æ›¾ç»å¯ç”¨è¿‡æœºå™¨äººçš„ç«™ç‚¹)
```

#### ä½¿ç”¨é»˜è®¤ç«™ç‚¹é…ç½®æ—¶, å¢åŠ æˆ–ç¦ç”¨éƒ¨åˆ†ç«™ç‚¹

å¦‚æœä½ éœ€è¦ç¦ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç«™ç‚¹, è¯·ä½¿ç”¨å‡å·è¡¨ç¤ºåˆ é™¤:

```toml
[site]
checkiner = ["-charon"] # å¼€å¯é»˜è®¤çš„ç­¾åˆ°å™¨, é™¤äº† charon
```

ä¹Ÿå¯ä»¥è‡ªç”±ç»„åˆ:

```toml
[site]
checkiner = ["all", "-charon"] # å¼€å¯æ‰€æœ‰çš„ç­¾åˆ°å™¨, é™¤äº† charon
```

å¦‚æœä½ éœ€è¦å¢åŠ ä¸€ä¸ªæˆ–å¤šä¸ªç«™ç‚¹, è¯·ä½¿ç”¨åŠ å·è¡¨ç¤ºé¢å¤–å¢åŠ .

```toml
[site]
checkiner = ["+charon"] # å¼€å¯é»˜è®¤çš„ç­¾åˆ°å™¨, åŠ ä¸Š charon
```

::: tip æç¤º
è¯·æ³¨æ„ä¸ä¸ä½¿ç”¨åŠ å·çš„å·®å¼‚:

```toml
[site]
checkiner = ["charon"] # ä»…å¼€å¯ charon ç­¾åˆ°å™¨
```

:::

#### ä¸åŒ Telegram è´¦å·ä½¿ç”¨ä¸åŒçš„ `site` æœåŠ¡é…ç½®

æ‚¨å¯ä»¥ä½¿ç”¨ `[telegram.account.site]` æ¡ç›®åœ¨æ¯ä¸ªè´¦å·ä¸‹æ–¹è®¾ç½®ç‰¹å®šäºè¿™ä¸ªè´¦å·çš„ `site` æœåŠ¡é…ç½®.

è¯·æ³¨æ„ç›¸å…³è®¾ç½®å¿…é¡»åœ¨ `[[telegram.account]]` ä¸‹æ–¹ç¬¬ä¸€ä¸ª.

```toml
[site] # é»˜è®¤ä½¿ç”¨è¿™é‡Œçš„æœåŠ¡é…ç½® // [!code ++]
checkiner = ["+charon"] # // [!code ++]

[[telegram.account]]
phone = "+86111111111111"

[telegram.account.site] # å¯¹äº "+86111111111111", ä½¿ç”¨å•ç‹¬é…ç½® // [!code ++]
checkiner = ["all"] # // [!code ++]

[[telegram.account]]
phone = "+86222222222222"

[telegram.account.site] # å¯¹äº "+86222222222222", ä½¿ç”¨å•ç‹¬é…ç½® // [!code ++]
checkiner = ["terminus"] # // [!code ++]

[[telegram.account]] # å¯¹äº "+86333333333333", ä½¿ç”¨é»˜è®¤é…ç½®
phone = "+86333333333333"
```

### `notifier` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®é€šçŸ¥ç›¸å…³å‚æ•°.

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `enabled` | `bool` | å¯ç”¨ç­¾åˆ°/ä¿æ´»ç»“æœçš„æ—¥å¿—æ¨é€ | `false` |
| `account` | `str`/`int` | ä½¿ç”¨ç¬¬å‡ ä¸ª Telegram è´¦å·è¿›è¡Œæ¨é€, ä» 1 å¼€å§‹è®¡æ•° | `1` |
| `immediately` | `bool` | é»˜è®¤æƒ…å†µä¸‹, æ—¥å¿—æ¨é€å°†åœ¨æ¯å¤©æŒ‡å®šæ—¶é—´ç»Ÿä¸€æ¨é€ (åœ¨ @embykeeper_bot è®¾ç½®), è®¾ç½®ä¸º false ä»¥ç«‹åˆ»æ¨é€ | `false` |
| `once` | `bool` | é»˜è®¤æƒ…å†µä¸‹, å¯åŠ¨æ—¶ç«‹åˆ»æ‰§è¡Œçš„ä¸€æ¬¡ç­¾åˆ°/ä¿æ´»ä¸ä¼šæ¨é€æ¶ˆæ¯, è®¾ç½®ä¸º true ä»¥æ¨é€ | `false` |

ä¾‹å¦‚:

```toml
[notifier]
enabled = true
account = 1
immediately = false
once = false
```

### `subsonic` å­é¡¹

è¯¥å­é¡¹ç”¨äºé…ç½®ä¸€ä¸ªæˆ–å¤šä¸ª Subsonic æœåŠ¡å™¨è´¦æˆ·ã€‚

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `time_range` | `str` | Subsonic ä¿æ´»å¼€å§‹å½“æ—¥æ—¶é—´æˆ–æ—¶é—´èŒƒå›´, ä¾‹å¦‚:<br> `"14:00"` /<br> `"2:00PM"` /<br> `"<11:00AM,2:00PM>"` /<br> `"<11:00,14:00>"` | `"<11:00AM,11:00PM>"` |
| `interval_days` | `int`/`str` | Subsonic ä¿æ´»é—´éš”å¤©æ•°, æˆ–é—´éš”å¤©æ•°èŒƒå›´, ä¾‹å¦‚:<br> `5` /<br> `"10"` /<br> `"<7,12>"` | `"<7,12>"` |
| `concurrency` | `int` | Subsonic ä¿æ´»æœ€å¤§å¹¶å‘ | `3` |

#### `subsonic.account` å­é¡¹

åœ¨ `account` åˆ—è¡¨ä¸­é…ç½®å…·ä½“çš„è´¦æˆ·ä¿¡æ¯ï¼š

<!-- prettier-ignore -->
| è®¾ç½®é¡¹ | å€¼ç±»å‹ | ç®€ä»‹ | é»˜è®¤å€¼ |
| ----- | ----- | ---- | ------ |
| `url` | `str` | Subsonic æœåŠ¡å™¨åœ°å€<br>ä¸€èˆ¬ä¸º "`https://...`" | |
| `username` | `str` | Subsonic æœåŠ¡å™¨ç”¨æˆ·å | |
| `password` | `str` | Subsonic æœåŠ¡å™¨å¯†ç  | |
| `name` | `str` | æ˜¾ç¤ºå, ä»¥åœ¨æ—¥å¿—ä¸­ä½¿ç”¨ | |
| `time` | `list` / `int` | æ¨¡æ‹Ÿæ’­æ”¾çš„éšæœºæ—¶é—´èŒƒå›´, è®¾ä¸ºå°äº0 (`time = -1`) ä»¥ä»…ç™»é™†ä¸æ’­æ”¾ (ç§’) | `[120, 240]` |
| `client` | `str` | è‡ªå®šä¹‰çš„å®¢æˆ·ç«¯å (é»˜è®¤æ¨¡æ‹ŸéŸ³æµ) | |
| `version` | `str` | è‡ªå®šä¹‰çš„å®¢æˆ·ç«¯å (é»˜è®¤æ¨¡æ‹ŸéŸ³æµ) | |
| `useragent` | `str` | è‡ªå®šä¹‰çš„ç”¨æˆ·ä»£ç† (é»˜è®¤æ¨¡æ‹ŸéŸ³æµ) | |
| `use_proxy` | `bool` | æ˜¯å¦ä½¿ç”¨å®šä¹‰çš„ä»£ç† (è‹¥å­˜åœ¨ `proxy`) | `true` |
| `interval_days` | `int`/`str` | è´¦å·ç‰¹å®šçš„ä¿æ´»é—´éš”å¤©æ•°, æˆ–é—´éš”å¤©æ•°èŒƒå›´ | (ä½¿ç”¨å…¨å±€é…ç½®) |
| `time_range` | `str` | è´¦å·ç‰¹å®šçš„ä¿æ´»å¼€å§‹å½“æ—¥æ—¶é—´æˆ–æ—¶é—´èŒƒå›´ | (ä½¿ç”¨å…¨å±€é…ç½®) |
| `enabled` | `bool` | æ˜¯å¦å¯ç”¨è¯¥è´¦å· | `true` |

ä¾‹å¦‚ï¼š

```toml
[subsonic]
time_range = "<11:00AM,2:00PM>"
interval_days = "<7,12>"
concurrency = 3

[[subsonic.account]]
url = "https://subsonic.example.com/"
username = "user"
password = "pass"
time = [120, 240] # æ¨¡æ‹Ÿæ”¶å¬çš„æ—¶é•¿ (ç§’)
```

### å…¶ä»–çš„ç‰¹å®šç«™ç‚¹é…ç½®å­é¡¹

å¦‚æœæ‚¨éœ€è¦åœ¨è‡ªåŠ¨æŠ¢æ³¨æ—¶è‡ªå®šä¹‰ç”¨æˆ·å, æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[monitor.bgk] # æ”¯æŒ bgk, embyhub, future, infinity_fly, judog, misty, polo, viper
unique_name = "your_username_for_registeration" # è‡ªåŠ¨æŠ¢æ³¨æ—¶ä½¿ç”¨çš„ç”¨æˆ·å
```

å¦‚æœæ‚¨éœ€è¦åœ¨ `Pornemby` è‡ªåŠ¨å›ç­”é—®é¢˜æ—¶, ä»…å½“é—®é¢˜å†å²ä¸­æ‰¾åˆ°ç­”æ¡ˆæ—¶è‡ªåŠ¨å›ç­”, ä¿è¯ç™¾åˆ†ç™¾å‡†ç¡®ç‡, æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[monitor.pornemby_answer]
only_history = true # ä»…å½“é—®é¢˜å†å²ä¸­æ‰¾åˆ°ç­”æ¡ˆæ—¶è‡ªåŠ¨å›ç­”
```

å¦‚æœæ‚¨éœ€è¦åœ¨ `Pornemby` è‡ªåŠ¨å›ç­”é—®é¢˜æ—¶, ä¸€å®šæ¦‚ç‡ä¸å›ç­”, æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[monitor.pornemby_answer]
possibility = 0.7 # 70% æ¦‚ç‡å›ç­”, 30% æ¦‚ç‡ä¸å›ç­”
```

å¦‚æœæ‚¨éœ€è¦åœ¨ `Pornemby` æŠ¢é¾™ç‹é›¨çº¢åŒ…æ—¶, ä¸€å®šæ¦‚ç‡ä¸æŠ¢, æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[monitor.pornemby_dragon_rain]
possibility = 0.3 # 30% æ¦‚ç‡æŠ¢, 70% æ¦‚ç‡ä¸æŠ¢
```

å¦‚æœæ‚¨éœ€è¦åœ¨ `Pornemby` è‡ªåŠ¨æ°´ç¾¤æ—¶, è‡ªå®šä¹‰æ¡æ•°, æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[messager.pornemby]
messages = ["pornemby-common-wl@latest.yaml * 100"] # æ¯å¤©å‘é€ 100 æ¡æ¶ˆæ¯
interval = 1800 # ä¸¤æ¬¡æ°´ç¾¤ä¹‹é—´æœ€å°é—´éš” (s)
```

å¯¹äº `Pornemby` æ™ºèƒ½æ°´ç¾¤ (`smart_pornemby`), æ‚¨éœ€è¦åœ¨é…ç½®æ–‡ä»¶æœ«å°¾è¿½åŠ :

```toml
[messager.smart_pornemby]
msg_per_day = 100 # æ¯å¤©å‘é€ 100 æ¡æ¶ˆæ¯
interval = 1800 # ä¸¤æ¬¡æ°´ç¾¤ä¹‹é—´æœ€å°é—´éš” (s)
```

æ‚¨ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æç¤ºè¯, ä¾‹å¦‚åœ¨é»˜è®¤æç¤ºè¯å¤–å¢åŠ æç¤ºè¯:

```toml
[messager.smart_pornemby]
extra_prompt = "è¯·å‹¿è¾“å‡ºæ•°å­—"
```

æ‚¨ä¹Ÿå¯ä»¥å®Œå…¨é‡å†™æç¤ºè¯:

```toml
[messager.smart_pornemby]
prompt = "xxxx"
```

::: info
å¯¹äºåŸºäºæ¨¡æ¿åˆ›å»ºçš„ç«™ç‚¹ (ä¾‹å¦‚ `templ_a<abcbot>`), æ‚¨éœ€è¦åŠ ä¸Šå¼•å·:

```toml
[monitor.'templ_a<abc_chat>']
name = "ABC è‡ªå®šä¹‰ç¾¤ç»„ç›‘æ§"
```

:::
